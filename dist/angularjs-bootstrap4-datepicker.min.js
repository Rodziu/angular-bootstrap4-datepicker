!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("angular"),require("date-extensions")):"function"==typeof define&&define.amd?define("angularjs-bootstrap4-datepicker",["angular","date-extensions"],e):"object"==typeof exports?exports["angularjs-bootstrap4-datepicker"]=e(require("angular"),require("date-extensions")):t["angularjs-bootstrap4-datepicker"]=e(t.angular,t.DateExtended)}(window,(function(t,e){return(()=>{"use strict";var s={734:e=>{e.exports=t},620:t=>{t.exports=e}},i={};function a(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return s[t](r,r.exports,a),r.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{a.d(r,{default:()=>k});var t=a(734),e=a(620),s=a.n(e);class i{constructor(t,e,s,i){this.displayData=[],this.$attrs=t,this.$timeout=e,this.datePicker=s,this.datePickerService=i}$onInit(){t.isObject(this.datepicker)&&t.isFunction(this.datepicker.disabledDates)&&(this.disabledDates=this.datepicker.disabledDates),this.format="format"in this.$attrs?this.$attrs.format:null!==this.datepicker&&"format"in this.datepicker.$attrs?this.datepicker.$attrs.format:this.datePicker.format,this.modelFormat="modelFormat"in this.$attrs?this.$attrs.modelFormat:null!==this.datepicker&&"modelFormat"in this.datepicker.$attrs?this.datepicker.$attrs.modelFormat:this.datePicker.modelFormat,this.$doCheck(),t.isUndefined(this.minDate)&&(this.minDate=this.datePicker.minDate),t.isUndefined(this.maxDate)&&(this.maxDate=this.datePicker.maxDate),this.monthPicker="monthPicker"in this.$attrs||null!==this.datepicker&&"monthPicker"in this.datepicker.$attrs,this.displayMode=this.monthPicker?"months":"days",this.dayNames=this.datePicker.dayNames,this.monthNames=this.datePicker.monthNames,this.buildCalendar()}$doCheck(){let e;try{this.ngModel instanceof s()?e=this.ngModel.clone():this.ngModel instanceof Date?e=s().createFromDate(this.ngModel):(e=s().createFromFormat(this.modelFormat,this.ngModel),e.isValid()||(e=new(s())(this.ngModel)))}catch(t){e=new(s())}!e.isValid()||this.currentDate instanceof s()&&e.format("Y-m-d")===this.currentDate.format("Y-m-d")?t.isUndefined(this.currentDisplayDate)&&(e=new(s()),this.currentDate=e,this.currentDisplayDate=e.clone()):(this.currentDate=e,this.currentDisplayDate=e.clone())}buildCalendar(){if("months"===this.displayMode)return;let t,e=[];if("days"===this.displayMode){if(!(this._lastRenderedDate instanceof s())||this.currentDisplayDate.format("Y-m")!==this._lastRenderedDate.format("Y-m")){this.displayData=[],this._lastRenderedDate=this.currentDisplayDate.clone();const i=new(s())(this.currentDisplayDate.format("Y-m-01"));let a=parseInt(i.format("N"))-1;for(0===a&&(a=7),i.sub(a,"day"),t=1;t<43;t++)e.push(i.clone()),t%7==0&&(this.displayData.push(e),e=[]),i.add(1)}}else{this.displayData=[];const s=12*Math.floor(this.currentDisplayDate.getFullYear()/12);for(t=0;t<3;t++){e=[];for(let i=0;i<4;i++){const a=s+(4*t+i);e.push(a)}this.displayData.push(e),e=[]}}}changeMode(t){this.displayMode!==t&&(this.displayMode=t,this.buildCalendar())}isEnabledDate(t,e){return this.datePickerService.isEnabledDate(this,t,e)}validDisplayAction(t){const e=this.currentDisplayDate.clone();switch(this.displayMode){case"days":return e.sub("prev"===t?1:-1,"month"),!!this.isEnabledDate(e,"month")&&e;case"months":return e.sub("prev"===t?1:-1,"year"),!!this.isEnabledDate(e,"year")&&e;case"years":{const i=12*Math.floor(this.currentDisplayDate.getFullYear()/12)+("prev"===t?-1:12);if(this.isEnabledDate(new(s())(i+""),"year"))return e.sub("prev"===t?12:-12,"year");break}}return!1}displayAction(t){const e=this.validDisplayAction(t);e&&(this.currentDisplayDate=e,this.buildCalendar())}pickDate(e,i){if(e instanceof Date&&(e=s().createFromDate(e)),e instanceof s()||(e=new(s())(e+"")),this.isEnabledDate(e,i))switch(i){case"day":this.ngModelCtrl.$setViewValue(e.format(this.modelFormat)),this.currentDate=e,this.currentDisplayDate=e,this.buildCalendar(),null!==this.datepicker&&(t.isFunction(this.datepicker.ngChange)&&this.datepicker.ngChange(),!1!==this.datepicker.options.hideOnPick&&this.$timeout((()=>{this.datepicker.isOpen=!1})));break;case"month":this.currentDisplayDate.setMonth(e.getMonth()),this.monthPicker?(this.currentDisplayDate.setDate(1),this.pickDate(this.currentDisplayDate,"day")):this.changeMode("days");break;case"year":this.currentDisplayDate.setFullYear(parseInt(e.format("Y"))),this.changeMode("months")}}}i.$inject=["$attrs","$timeout","datePicker","datePickerService"];const n={bindings:{ngModel:"=",minDate:"<?",maxDate:"<?",disabledDates:"&?"},template:"<table class=\"table table-sm table-datepicker\"><thead><tr><th ng-click=\"ctrl.displayAction('prev')\" ng-class=\"{'disabled': !ctrl.validDisplayAction('prev')}\"><i class=\"fa fa-chevron-left\"></i></th><th ng-click=\"ctrl.changeMode(ctrl.displayMode === 'days' ? 'months' : 'years')\" colspan=\"{{ctrl.displayMode == 'days' ? 5 : 2}}\" ng-switch=\"ctrl.displayMode\"><span ng-switch-when=\"days\">{{ctrl.currentDisplayDate.format('F Y')}}</span> <span ng-switch-when=\"months\">{{ctrl.currentDisplayDate.format('Y')}}</span> <span ng-switch-when=\"years\">{{ctrl.displayData[0][0]}} - {{ctrl.displayData[2][3]}}</span></th><th ng-click=\"ctrl.displayAction('next')\" ng-class=\"{'disabled': !ctrl.validDisplayAction('next')}\"><i class=\"fa fa-chevron-right\"></i></th></tr><tr ng-show=\"ctrl.displayMode == 'days'\"><th ng-repeat=\"d in ::ctrl.dayNames\">{{d}}</th></tr></thead><tbody ng-switch=\"ctrl.displayMode\"><tr ng-switch-when=\"days\" ng-repeat=\"row in ctrl.displayData\"><td ng-repeat=\"d in ::row\" ng-click=\"ctrl.pickDate(d, 'day')\" ng-class=\"{ 'old': d.format('Y-m') < ctrl.currentDisplayDate.format('Y-m'), 'fut': d.format('Y-m') > ctrl.currentDisplayDate.format('Y-m'), 'active': d.format('Ymd') == ctrl.currentDate.format('Ymd'), 'disabled': !ctrl.isEnabledDate(d, 'day')}\">{{::d.format('j')}}</td></tr><tr ng-switch-when=\"months\" ng-repeat=\"row in ::ctrl.monthNames\" class=\"months\"><td ng-repeat=\"m in ::row\" ng-click=\"ctrl.pickDate(ctrl.currentDisplayDate.format('Y-' + m.number), 'month')\" ng-class=\"{'active': ctrl.currentDisplayDate.format('Y' + m.number) == ctrl.currentDate.format('Yn'), 'disabled': !ctrl.isEnabledDate(ctrl.currentDisplayDate.format('Y-' + m.number), 'month')}\">{{::m.name}}</td></tr><tr ng-switch-when=\"years\" ng-repeat=\"row in ctrl.displayData\" class=\"years\"><td ng-repeat=\"y in ::row\" ng-click=\"ctrl.pickDate(y, 'year')\" ng-class=\"{'active': y == ctrl.currentDate.getFullYear(), 'disabled': !ctrl.isEnabledDate(y + '', 'year')}\">{{::y}}</td></tr></tbody></table>",controllerAs:"ctrl",require:{ngModelCtrl:"ngModel",datepicker:"?^datepicker"},controller:i};class o{constructor(t,e,s,i,a,r,n){this.isOpen=!1,this.options={},this.$document=t,this.$scope=e,this.$element=s,this.$attrs=i,this.$parse=a,this.datePicker=r,this.datePickerService=n,this._onClick=t=>{this.isOpen&&!s[0].contains(t.target)&&(this.isOpen=!1,e.$digest())},t.on("click",this._onClick)}$onInit(){if(t.forEach(this.datePicker,((e,s)=>{t.isDefined(this.$attrs[s])?("false"===this.$attrs[s]?this.$attrs[s]=!1:"true"===this.$attrs[s]&&(this.$attrs[s]=!0),this.options[s]=this.$attrs[s]):this.options[s]=e})),t.isFunction(this.ngChange)){const t=this.ngChange,e=this.$parse(this.$attrs.ngModel);this.ngChange=()=>{e.assign(this.$scope.$parent,this.ngModel),t()}}}$onChanges(){this.isSmall=this.$element.hasClass("form-control-sm"),this.isLarge=this.$element.hasClass("form-control-lg")}$onDestroy(){this.$document.off("click",this._onClick)}isEnabledDate(t,e){return this.datePickerService.isEnabledDate(this,t,e)}}o.$inject=["$document","$scope","$element","$attrs","$parse","datePicker","datePickerService"];const c={bindings:{ngModel:"=",minDate:"<?",maxDate:"<?",disabledDates:"&?",ngChange:"&?",placeholder:"@?"},template:'<div class="dropdown" ng-class="{ \'input-group\': dpCtrl.options.showIcon, \'input-group-sm\': dpCtrl.isSmall, \'input-group-lg\': dpCtrl.isLarge, \'show\': dpCtrl.isOpen}"><input type="text" class="form-control" ng-model="dpCtrl.ngModel" datepicker-input ng-attr-placeholder="{{dpCtrl.placeholder}}" ng-click="dpCtrl.isOpen = true" ng-required="dpCtrl.isRequired"><ul class="dropdown-menu dropdown-menu-right angular-datepicker" ng-click="$event.stopPropagation()" ng-class="{\'show\': dpCtrl.isOpen}"><li ng-if="dpCtrl.isOpen"><datepicker-calendar ng-model="dpCtrl.ngModel" min-date="dpCtrl.minDate" max-date="dpCtrl.maxDate"></datepicker-calendar></li></ul><span class="input-group-append" ng-show="::dpCtrl.options.showIcon"><button type="button" class="btn btn-outline-secondary" data-ng-disabled="dpCtrl.isDisabled" ng-click="dpCtrl.isOpen = true"><i class="fa fa-calendar"></i></button></span></div>',controllerAs:"dpCtrl",controller:o};function l(e){const i=["required","disabled","readonly"];return{restrict:"A",require:["ngModel","^datepicker"],link:function(a,r,n,o){const[c,l]=o;for(let t=0;t<i.length;t++)!function(t){l.$attrs.$observe(t,(function(e){if("disabled"===t)l.isDisabled=e;else if("required"===t)return void(l.isRequired=e);r.attr(t,e)}))}(i[t]);const d="format"in l.$attrs?l.$attrs.format:e.format,h="modelFormat"in l.$attrs?l.$attrs.modelFormat:e.modelFormat;function p(e,i){return a=>{let n=!0;if(t.isString(a)&&t.isDefined(l.isEnabledDate)&&""!==a){const t=s().createFromFormat(e,a);t.isValid()?(a=t.format(i),n=l.isEnabledDate(t,"day")):n=!1}return r[0].setCustomValidity(n?"":" "),a}}c.$parsers.push(p(d,h)),c.$formatters.push(p(h,d))}}}l.$inject=["datePicker"];const d=t.module("datePicker.datePicker",[]).provider("datePicker",class{constructor(){this.options={showIcon:!0,hideOnPick:!1,dayNames:[],monthNames:[],format:"Y-m-d",modelFormat:"Y-m-d",updateDateTranslations:()=>{this.options.dayNames=s().getDayShortNames(),this.options.dayNames.push(this.options.dayNames.shift()),this.options.monthNames=[];for(let t=0;t<3;t++){const e=[];for(let i=0;i<4;i++){const a=4*t+i+1;e.push({name:s().getMonthShortNames()[a-1],number:a})}this.options.monthNames.push(e)}}},this.options.updateDateTranslations()}$get(){return this.options}}).factory("datePickerService",class{isEnabledDate(e,i,a){i instanceof Date||(i=new(s())(i+""));const r=i.getFullYear(),n=i.getMonth(),o=i.getDate(),c=function(i){if(t.isDefined(e[i+"Date"])){const t=e[i+"Date"]instanceof s()?e[i+"Date"]:e[i+"Date"]instanceof Date?s().createFromDate(e[i+"Date"]):new(s())(e[i+"Date"]),c=function(t,e,s){return"min"===i?t>e||!!s&&t===e:t<e||!!s&&t===e};if(t.isValid())return c(r,t.getFullYear())||r===t.getFullYear()&&("year"===a||c(n,t.getMonth())||n===t.getMonth()&&("month"===a||c(o,t.getDate(),!0)))}return!0},l=c("min")&&c("max");return l&&t.isFunction(e.disabledDates)?e.disabledDates({date:i,mode:a}):l}}).component("datepickerCalendar",n).component("datepicker",c).directive("datepickerInput",l).name;class h{constructor(t,e,s,i,a,r){this.options={},this.$document=t,this.$scope=e,this.$element=s,this.$attrs=i,this.$parse=a,this.timePicker=r}$onInit(){if(t.forEach(this.timePicker,((e,s)=>{t.isDefined(this.$attrs[s])?("false"===this.$attrs[s]?this.$attrs[s]=!1:"true"===this.$attrs[s]&&(this.$attrs[s]=!0),this.options[s]=this.$attrs[s]):this.options[s]=e})),t.isFunction(this.ngChange)){const t=this.ngChange,e=this.$parse(this.$attrs.ngModel);this.ngChange=()=>{e.assign(this.$scope.$parent,this.ngModel),t()}}this.isOpen=!1,this.$attrs.$observe("required",(t=>{this.isRequired=!!t})),this._onClick=t=>{this.isOpen&&!this.$element[0].contains(t.target)&&(this.isOpen=!1,this.$scope.$digest())},this.$document.on("click",this._onClick)}$onChanges(){this.isSmall=this.$element.hasClass("form-control-sm"),this.isLarge=this.$element.hasClass("form-control-lg")}$onDestroy(){this.$document.off("click",this._onClick)}}h.$inject=["$document","$scope","$element","$attrs","$parse","timePicker"];const p={bindings:{ngModel:"=",pickHours:"<?",pickMinutes:"<?",pickSeconds:"<?",ngChange:"&?",placeholder:"@?"},template:'<div class="dropdown" ng-class="{ \'input-group\': tpCtrl.options.showIcon, \'input-group-sm\': tpCtrl.isSmall, \'input-group-lg\': tpCtrl.isLarge, \'show\': tpCtrl.isOpen}"><input type="text" class="form-control" ng-model="tpCtrl.ngModel" ng-required="tpCtrl.isRequired" ng-attr-placeholder="{{tpCtrl.placeholder}}" ng-click="tpCtrl.isOpen = true" readonly><ul class="dropdown-menu dropdown-menu-right angular-timepicker" ng-click="$event.stopPropagation()" ng-class="{\'show\': tpCtrl.isOpen}"><li ng-if="tpCtrl.isOpen"><timepicker-drop ng-model="tpCtrl.ngModel" pick-hours="tpCtrl.pickHours" pick-minutes="tpCtrl.pickMinutes" pick-seconds="tpCtrl.pickSeconds"></timepicker-drop></li></ul><span class="input-group-append" ng-show="::tpCtrl.options.showIcon"><button type="button" class="btn btn-outline-secondary" data-ng-disabled="tpCtrl.isDisabled" ng-click="tpCtrl.isOpen = true"><i class="fa fa-clock"></i></button></span></div>',controllerAs:"tpCtrl",controller:h};class u{constructor(t,e){this.mode="picker",this.hours=0,this.minutes=0,this.seconds=0,this.$timeout=t,this.timePicker=e,this.hoursArray=this.timePicker.hours,this.minutesArray=this.timePicker.minutes}$onInit(){t.isUndefined(this.pickHours)&&(this.pickHours=this.timePicker.pickHours),t.isUndefined(this.pickMinutes)&&(this.pickMinutes=this.timePicker.pickMinutes),t.isUndefined(this.pickSeconds)&&(this.pickSeconds=this.timePicker.pickSeconds),this.parseFromNgModel()}$doCheck(){t.equals(this.ngModel,this._ngModel)||(this._ngModel=this.ngModel,this.parseFromNgModel())}parseFromNgModel(){t.isString(this.ngModel)&&(this.hours=0,this.minutes=0,this.seconds=0);try{let t=0,e=0,s=0,i=!1;this.ngModel.split(":").some(((a,r)=>{switch(r){case 0:if(this.pickHours)t=parseInt(a);else if(this.pickMinutes)e=parseInt(a),i=!0;else if(this.pickSeconds)return s=parseInt(a),!0;break;case 1:if(this.pickMinutes&&!i)e=parseInt(a);else if(this.pickSeconds)return s=parseInt(a),!0;break;case 2:return this.pickSeconds&&(s=parseInt(a)),!0}})),isNaN(t)||isNaN(e)||isNaN(s)||(this.hours=t,this.minutes=e,this.seconds=s)}catch(t){}}setMode(t){this.mode=t}change(t,e){const s="hours"===t?23:59;e?this[t]++:this[t]--,this[t]>s?this[t]=0:this[t]<0&&(this[t]=s),this.updateModel()}updateModel(){const e=[];this.pickHours&&e.push(this.hours<10?"0"+this.hours:this.hours),this.pickMinutes&&e.push(this.minutes<10?"0"+this.minutes:this.minutes),this.pickSeconds&&e.push(this.seconds<10?"0"+this.seconds:this.seconds),this.ngModel=e.join(":"),this.ngModelCtrl.$setViewValue(this.ngModel),null!==this.timepicker&&t.isFunction(this.timepicker.ngChange)&&this.timepicker.ngChange()}pick(t,e){this[t]=parseInt(e),this.mode="picker",this.updateModel(),null!==this.timepicker&&!1!==this.timepicker.options.hideOnPick&&this.$timeout((()=>{this.timepicker.isOpen=!1}))}}u.$inject=["$timeout","timePicker"];const m={bindings:{ngModel:"=",pickHours:"<?",pickMinutes:"<?",pickSeconds:"<?"},template:'<table class="table table-sm table-timepicker" ng-switch="ctrl.mode"><tbody ng-switch-when="picker"><tr><td ng-if="ctrl.pickHours"><a ng-click="ctrl.change(\'hours\', true)"><i class="fa fa-chevron-up"></i></a></td><td ng-if="ctrl.pickMinutes"><a ng-click="ctrl.change(\'minutes\', true)"><i class="fa fa-chevron-up"></i></a></td><td ng-if="ctrl.pickSeconds"><a ng-click="ctrl.change(\'seconds\', true)"><i class="fa fa-chevron-up"></i></a></td></tr><tr class="timepicker-values"><td ng-if="ctrl.pickHours"><a ng-click="ctrl.setMode(\'hours\')">{{ctrl.hours | datePad}}</a></td><td ng-if="ctrl.pickMinutes"><a ng-click="ctrl.setMode(\'minutes\')">{{ctrl.minutes | datePad}}</a></td><td ng-if="ctrl.pickSeconds"><a ng-click="ctrl.setMode(\'seconds\')">{{ctrl.seconds | datePad}}</a></td></tr><tr><td ng-if="ctrl.pickHours"><a ng-click="ctrl.change(\'hours\')"><i class="fa fa-chevron-down"></i></a></td><td ng-if="ctrl.pickMinutes"><a ng-click="ctrl.change(\'minutes\')"><i class="fa fa-chevron-down"></i></a></td><td ng-if="ctrl.pickSeconds"><a ng-click="ctrl.change(\'seconds\')"><i class="fa fa-chevron-down"></i></a></td></tr></tbody><tbody ng-switch-when="hours"><tr ng-repeat="h in ::ctrl.hoursArray" class="hours"><td ng-repeat="hh in ::h"><a ng-click="ctrl.pick(\'hours\', hh.hour)">{{::hh.hour}}</a></td></tr></tbody><tbody ng-switch-default><tr ng-repeat="m in ::ctrl.minutesArray" class="hours"><td ng-repeat="mm in ::m"><a ng-click="ctrl.pick(ctrl.mode, mm.minute)">{{::mm.minute}}</a></td></tr></tbody></table>',controllerAs:"ctrl",require:{timepicker:"?^timepicker",ngModelCtrl:"ngModel"},controller:u},g=t.module("datePicker.timePicker",[]).provider("timePicker",class{constructor(){this.options={pickHours:!0,pickMinutes:!0,pickSeconds:!0,showIcon:!0,hideOnPick:!1,hours:[],minutes:[]};const t=[],e=[];let s,i;for(s=0;s<10;s++){const a=[],r=[];for(i=0;i<6;i++){if(s<6&&i<4){const t=4*s+i;a.push({hour:t<10?"0"+t:t})}const t=6*s+i;r.push({minute:t<10?"0"+t:t})}t.push(a),e.push(r)}this.options.hours=t,this.options.minutes=e}$get(){return this.options}}).filter("datePad",(function(){return function(e){return t.isNumber(e)&&e<10?"0"+e:e}})).component("timepicker",p).component("timepickerDrop",m).name,k=t.module("datePicker",[d,g]).name})(),r.default})()}));
//# sourceMappingURL=angularjs-bootstrap4-datepicker.min.js.map